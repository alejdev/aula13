<div class="sidenav-container">
  <div class="side-menu-container" fxLayout="column" fxLayoutGap="10px">

    <!-- Title -->
    <h1 class="pl-1 pt-h mat-body mat-hint">{{title}}</h1>

    <!-- User -->
    <div class="mt-1 mb-2" fxLayout="column" fxLayoutAlign="center center">
      <a matRipple class="avatar avatar-button border-theme border-theme-button">
        <img class="avatar-image" [src]="srcImage({img: user?.avatar })" alt="Avatar">
      </a>
      <div class="mt-1" fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="5px">
        <span class="user-name">{{ user?.name || user?.email }}</span>
        <button mat-icon-button [matMenuTriggerFor]="menuProfileId" attr.aria-label="{{'OPTION_MENU' | translate}}">
          <fa-icon class="mat-hint relative" style="top:-3px" icon="sort-down"></fa-icon>
        </button>
        <mat-menu #menuProfileId="matMenu">
          <button *ngFor="let option of menuProfile" mat-menu-item (click)="option.action()"
            [disabled]="option.disabled">
            <fa-icon class="mat-icon-20 mat-hint" [icon]="option.icon"></fa-icon>
            <span>{{option.name | translate}}</span>
          </button>
        </mat-menu>
      </div>
    </div>

    <!-- Menu -->
    <div class="overflow-scroll-container">
      <mat-nav-list class="m-0 p-0 mb-1 overflow-scroll" *ngFor="let menu of menuItems; index as i">
        <div class="overflow-scroll-content nav-list">
          <ng-container *ngFor="let item of menu">
            <a mat-list-item (click)="onItemSelected(item)" [ngClass]="{'active': item.expanded}">
              <fa-icon class="mat-hint" [icon]="item.icon"></fa-icon>
              <span class="mat-hint pl-h ml-q">{{ item?.name | translate}}</span>
              <span fxFlex></span>
              <button mat-icon-button [@indicatorRotate]="item.expanded ? 'expanded': 'collapsed'"
                (click)="createElement($event, item)">
                <fa-icon class="mat-hint" icon="plus"></fa-icon>
              </button>
            </a>
            <div *ngIf="item.expanded">
              <ng-container *ngFor="let child of item.children">
                <a mat-list-item (click)="onItemSelected(child)" [ngClass]="{'expanded': child.expanded}">
                  <span class="mat-hint pl-1 ml-1">{{child?.name}}</span>
                  <span fxFlex></span>
                  <button mat-icon-button [matMenuTriggerFor]="menuOptionsId"
                    attr.aria-label="{{'OPTION_MENU' | translate}}">
                    <fa-icon class="mat-hint" icon="ellipsis-v"></fa-icon>
                  </button>
                </a>
                <mat-menu #menuOptionsId="matMenu">
                  <button *ngFor="let option of menuOptions" mat-menu-item
                    (click)="openMenuOption($event, item, child, option)">
                    <fa-icon class="mat-icon-16 mat-hint" [icon]="option.icon"></fa-icon>
                    <span>{{option.name | translate}}</span>
                  </button>
                </mat-menu>
              </ng-container>
            </div>
          </ng-container>
        </div>
      </mat-nav-list>
    </div>

    <!-- Configuration -->
    <mat-nav-list class="m-0 p-0 last-item">
      <a mat-list-item [routerLink]="[ '/aula/configuracion' ]" routerLinkActive="active">
        <fa-icon class="mat-hint" icon="cog"></fa-icon>
        <span class="mat-hint pl-h ml-q">{{ 'SETTINGS' | translate}}</span>
      </a>
    </mat-nav-list>
  </div>
</div>